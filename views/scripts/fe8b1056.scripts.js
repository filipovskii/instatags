"use strict";angular.module("instatags",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("main",{url:"/{q}",templateUrl:"views/main.html",controller:"MainCtrl"})}]),angular.module("instatags").controller("MainCtrl",["$scope","$state","$stateParams",function(a,b,c){function d(){var b={};a.authors=[],$.getJSON("https://api.instagram.com/v1/tags/"+encodeURIComponent(a.tag)+"/media/recent?callback=?"+"&client_id=6b969ecebfb14b559e7b1e327c334116").then(function(c){a.$apply(function(){_.forEach(c.data,function(c){var d=c.user;"image"===c.type&&(_.has(b,d.username)||(b[d.username]=d,a.authors.push(d)),d=b[d.username],d.images=d.images||[],d.images.push(c))}),_.forEach(a.authors,function(a){a.likesCount=0,_.forEach(a.images,function(b){console.log(b),a.likesCount+=b.likes.count}),a.likesPerImage=a.likesCount/a.images.length})})})}a.tag=c.q||"",a.tagExamples=["art","puppies","insta","vsco","kittens"],a.$watch("tag",function(){a.authors=[]}),a.search=function(){b.go("main",{q:a.tag})},a.tag&&d()}]),angular.module("instatags").directive("itPlaceholderHint",function(){return{restrict:"A",link:function(a,b,c){function d(a){var b,c=Q.defer();return b=setInterval(function(){var d=f.attr("placeholder")||"";a.length===d.length&&(clearInterval(b),c.resolve()),a.length>d.length&&f.attr("placeholder",d+a[d.length]),a.length<d.length&&f.attr("placeholder",d.slice(0,-1))},50),c.promise}var e=a.$eval(c.itPlaceholderHint),f=$(b),g={num:0};d(e[g.num]),g.num+=1,setInterval(function(){g.num===e.length&&(g.num=0),d("").then(function(){return Q.delay(500)}).then(function(){return d(e[g.num])}).then(function(){g.num+=1}).done()},2e3)}}});